<template>
  <g id="navi-attack-group">
    <g v-html="this.naviAttackPose"></g>
    <g id="attack1">
        <rect x="67.76" y="16.92" width="1.64" height="1.64" />
        <rect x="70.62" y="16.92" width="1.64" height="1.64" />
        <rect x="69.39" y="13.86" width="1.22" height="3.06" />
        <rect x="73.39" y="16.92" width="1.64" height="1.64" />
        <rect x="78.43" y="13.86" width="1.53" height="1.53" />
        <polygon points="76.73 18.56 78.43 18.56 78.43 16.92 78.43 15.39 75.02 15.39 75.02 16.92 76.73 16.92 76.73 18.56" />
        <rect x="75.02" y="18.56" width="1.7" height="3.07" />
        <polygon points="83.19 29.75 83.19 28.01 81.54 28.01 81.54 26.25 79.76 26.25 79.76 24.71 81.54 24.71 81.54 23.27 82.63 23.27 82.63 21.69 76.73 21.69 76.73 23.27 79.68 23.27 79.68 24.71 78.07 24.71 78.07 26.25 78.91 26.25 78.91 28.01 78.32 28.01 78.32 29.31 76.73 29.31 76.73 31.2 75.35 31.2 75.35 34.35 74.14 34.35 74.14 32.73 72.18 32.73 72.18 34.39 73.82 34.39 73.82 35.88 75.35 35.88 75.35 37.33 76.73 37.33 76.73 39.21 78.32 39.21 78.32 35.55 76.73 35.55 76.73 32.73 78.24 32.73 78.24 34.39 79.9 34.39 79.9 32.73 78.32 32.73 78.32 29.75 83.19 29.75" />
        <rect x="69.12" y="32.73" width="1.59" height="1.66" />
        <rect x="66.14" y="32.73" width="1.59" height="1.66" />
        <rect x="67.73" y="34.39" width="1.4" height="2.82" />
    </g>
    <g id="attack2">
        <polygon points="66.57 18.77 66.57 15.6 64.93 15.6 64.93 17.6 62.96 17.6 62.96 18.77 64.93 18.77 66.57 18.77" />
        <rect x="67.79" y="15.6" width="1.64" height="2" />
        <rect x="66.57" y="11.22" width="1.22" height="4.38" />
        <rect x="72.2" y="17.6" width="1.7" height="2.7" />
        <polygon points="63.15 36.2 61.75 36.2 61.75 37.61 63.15 37.61 63.15 36.21 66.19 36.21 66.19 34.55 63.15 34.55 63.15 36.2" />
        <polygon points="65.14 39.44 65.14 42.26 66.19 42.26 66.19 41.1 67.45 41.1 67.45 39.44 69.06 39.44 69.06 37.83 67.45 37.83 67.45 36.21 66.19 36.21 66.19 39.44 65.14 39.44" />
        <rect x="61.44" y="16.09" width="1.51" height="1.51" />
        <polygon points="70.6 18.77 70.6 17.6 72.2 17.6 72.2 15.6 70.56 15.6 70.56 17.6 69.43 17.6 69.43 18.77 70.6 18.77" />
        <rect x="72.2" y="12.83" width="1.7" height="2.77" />
        <rect x="73.9" y="15.6" width="1.37" height="2" />
        <polygon points="76.54 14.41 78.3 14.41 78.3 12.7 76.54 12.7 76.54 13.93 75.27 13.93 75.27 15.6 76.54 15.6 76.54 14.41" />
        <rect x="79.73" y="17.26" width="1.53" height="1.69" />
        <rect x="78.48" y="14.41" width="1.25" height="2.85" />
        <polygon points="79.73 14.41 81.15 14.41 81.15 12.7 81.15 11.24 81.15 9.71 79.62 9.71 79.62 11.24 78.3 11.24 78.3 12.7 79.73 12.7 79.73 14.41" />
        <rect x="81.25" y="8.24" width="1.48" height="1.48" />
        <polygon points="84.39 17.26 85.98 17.26 85.98 15.97 82.8 15.97 82.8 17.26 82.8 20.74 84.39 20.74 84.39 17.26" />
        <rect x="84.39" y="20.74" width="1.82" height="1.64" />
        <rect x="85.99" y="14.41" width="1.56" height="1.56" />
        <rect x="87.39" y="25.37" width="0.92" height="1.52" />
        <polygon points="76.64 22.38 76.64 23.8 79.73 23.8 79.73 25.21 82.39 25.21 82.39 26.89 79.73 26.89 79.73 28.53 76.69 28.53 76.69 29.95 73.9 29.95 73.9 31.49 78.3 31.49 78.3 29.95 81.25 29.95 81.25 28.53 84.39 28.53 84.39 26.89 85.98 26.89 85.98 25.21 84.39 25.21 84.39 23.73 81.26 23.73 81.26 22.38 78.3 22.38 78.3 20.31 73.9 20.31 73.9 22.38 76.64 22.38" />
        <polygon points="69.37 32.99 66.19 32.99 66.19 34.55 67.78 34.55 67.78 36.2 69.37 36.2 69.37 34.55 69.37 32.99" />
        <rect x="69.37" y="36.2" width="1.54" height="1.62" />
        <rect x="70.91" y="34.34" width="2.77" height="1.69" />
        <rect x="73.68" y="36.2" width="1.62" height="1.62" />
        <polygon points="79.73 37.61 78.3 37.61 78.3 34.55 76.92 34.55 76.92 37.83 78.3 37.83 78.3 39.13 76.92 39.13 76.92 37.83 75.3 37.83 75.3 39.44 76.31 39.44 76.31 40.52 78.3 40.52 78.3 42.14 79.73 42.14 79.73 43.98 81.26 43.98 81.26 40.52 79.73 40.52 79.73 37.61" />
        <polygon points="81.25 36.19 85.98 36.19 85.98 34.55 84.54 34.55 84.54 32.99 82.8 32.99 82.8 34.55 81.26 34.55 81.26 32.99 78.3 32.99 78.3 34.55 81.25 34.55 81.25 36.19" />
        <rect x="85.99" y="36.21" width="2.1" height="1.61" />
        <rect x="81.26" y="31.49" width="1.54" height="1.5" />
        <rect x="82.8" y="29.95" width="1.74" height="1.54" />
        <polygon points="73.9 28.27 76.64 28.27 76.64 26.69 78.3 26.69 78.3 25.37 76.64 25.37 76.64 23.8 73.9 23.8 73.9 28.27" />
    </g>
</g>  
</template>

<script>
import { TimelineLite } from "gsap";

export default {
    name: "NaviAttack",
    props: {
        deviceType: {
            type: String
        }
    },      
    data() {
        return {
            naviAttackPose: String
        }
    },
    created() {
        this.naviAttackPose = require(`!html-loader!../../../assets/svgs/players/${this.deviceType}/attack-pose.svg`);
    },
    mounted() {
        this.attackTimeLine = new TimelineLite();

        this.attackTimeLine.to('#navi-attack-group', {y: 10, scaleX: 1.3, scaleY: 1.3, duration: 0.5, ease: "none"});
        this.attackTimeLine.to('#navi-attack-group', {y: 17, scaleX: 1.5, scaleY: 1.5, duration: 0.5, ease: "none"});
        this.attackTimeLine.set('#attack1', {display: 'block'});
        this.attackTimeLine.to('#navi-attack-group', {x: -15, duration: 0.5, ease: "none"});
        this.attackTimeLine.set('#attack1', {display: 'none'});
        this.attackTimeLine.set('#attack2', {display: 'block'});
        this.attackTimeLine.to('#navi-attack-group', {x: -27, duration: 0.5, ease: "none"});

        this.attackTimeLine.play()
        .then(() => this.$emit('animationEnd'));
    }
}
</script>

<style  scoped lang="scss">
#navi-attack-group {
    transform-origin: center;
    transform: ro;

    #attack1, #attack2 {
        display: none;
    }
}

</style>