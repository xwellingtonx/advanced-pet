(self["webpackChunkadvanced_pet"]=self["webpackChunkadvanced_pet"]||[]).push([[1417],{11417:function(t,e,h){"use strict";h.r(e),h.d(e,{default:function(){return V}});var r=function(){var t=this,e=t._self._c;return e("g",[e("svg",{attrs:{viewBox:"0 0 83 75",width:"83",height:"75",x:"48.05",y:"64.94"}},[e("rect",{attrs:{width:"83",height:"75",rx:"3.01",ry:"3.01"}}),"ai"===this.battleType&&null!==this.currentCharacter&&"player"!==this.currentCharacter.type?e("g",{domProps:{innerHTML:t._s(this.screenContent)}}):t._e(),"ai"===this.battleType&&null!==this.currentCharacter&&"player"===this.currentCharacter.type?e("g",{staticClass:"flip",domProps:{innerHTML:t._s(this.screenContent)}}):t._e(),"ai"!==this.battleType&&null!==this.currentCharacter?e("g",{staticClass:"standby-face-right",class:{flip:t.currentCharacter.sessionId!==this.sessionId},domProps:{innerHTML:t._s(this.screenContent)}}):t._e(),e("health-status",{ref:"hpBar"})],1)])},i=[],s=h(37878),a=h(90408),n=h(29233),c={name:"BattleChooseWinner",components:{HealthStatus:n.Z},data(){return{currentCharacter:null,screenContent:""}},computed:{...(0,a.rn)({turnType:t=>t.battle.turnType,battleType:t=>t.battle.type,enemy:t=>t.battle.enemy,player:t=>t.battle.player,currentTurn:t=>t.battle.currentTurn,deviceType:t=>t.session.deviceType,sessionId:t=>t.session.id}),...(0,a.Se)({enemyDamageActions:"battle/getAllEnemyDamageActions",playerHPActions:"battle/getAllPlayerHPActions"})},mounted(){this.battleType===s.sd.AI?(this.turnType===s.ZD.Attack?(this.currentCharacter=this.player,this.createUI()):(this.currentCharacter=this.enemy,this.createUI()),this.startAnim(this.player,this.enemy)):(this.currentCharacter=this.player,this.createUI(),this.$socket.client.emit("getPlayersStatus",this.$store.state.battle.id))},methods:{createHPBars(t){this.$refs.hpBar&&this.$refs.hpBar.updateHealth(t.hp,this.getDamage(t))},startAnim(t,e){var h=750,r=4e3,i=null;i=setInterval((()=>{r<=0?(clearInterval(i),this.chooseWinner(t,e)):r>0&&(this.battleType===s.sd.AI?this.currentCharacter.type===t.type?this.currentCharacter=e:this.currentCharacter=t:this.currentCharacter.sessionId===t.sessionId?this.currentCharacter=e:this.currentCharacter=t,this.createUI(),r-=h)}),h)},chooseWinner(t,e){this.calculateTotalHP(t)>this.calculateTotalHP(e)?this.currentCharacter=t:this.currentCharacter=e;var h="";this.createUI(),this.battleType===s.sd.AI?this.currentCharacter.type===s.qZ.Player?(h=s.Pm.BattleWinner,this.$store.commit("session/levelup"),this.enemy.type===s.qZ.Virus?this.$store.dispatch("session/stageClear"):this.enemy.type===s.qZ.Boss&&this.$store.dispatch("session/stageComplete")):(h=s.Pm.BattleLoser,this.currentCharacter.type===s.qZ.Boss?this.$store.commit("session/decrementStageClear",10):this.$store.commit("session/decrementNaviRecovery",100)):(this.currentCharacter.sessionId===this.$store.state.session.id?(this.$store.commit("session/incrementWins"),h=s.Pm.BattleWinner):(this.$store.commit("session/incrementLosses"),h=s.Pm.BattleLoser),this.$socket.client.emit("endBattle",this.$store.state.battle.id)),this.$store.commit("session/setCurrentScene",h)},importRightFace(){this.screenContent=h(39810)(`./${this.deviceType.toLowerCase()}/attack-face.svg`).default},importVirus(){this.screenContent=h(77572)(`./${this.enemy.image}`).default},importBoss(){this.screenContent=h(60557)(`./${this.enemy.image}`).default},createUI(){this.currentCharacter.type===s.qZ.Player?this.importRightFace():this.currentCharacter.type===s.qZ.Virus?this.importVirus():this.importBoss(),this.createHPBars(this.currentCharacter)},calculateTotalHP(t){var e=0,h=this.getDamage(t);return h.forEach((t=>{e+=t.value})),t.hp+e},getDamage(t){var e=[];return e=t.type===s.qZ.Player&&t.sessionId===this.sessionId?this.playerHPActions:this.enemyDamageActions,e}},sockets:{playersStatus(){this.startAnim(this.player,this.enemy)}}},o=c,H=h(1001),v=(0,H.Z)(o,r,i,!1,null,"7e1ac75a",null),V=v.exports},29233:function(t,e,h){"use strict";h.d(e,{Z:function(){return o}});var r=function(){var t=this,e=t._self._c;return e("g",{staticClass:"hp-bar"},[e("rect",{attrs:{x:"2.91",y:"62.02",width:"77.18",height:"9.98"}}),e("rect",{staticClass:"primary-color",attrs:{x:"3",y:"64.55",width:"77.18",height:"7.45"}}),t._l(t.currentHPBars,(function(t){return e("rect",{key:t.id,attrs:{x:t.x,y:"64.79",width:"4.85",height:"6.88"}})}))],2)},i=[],s={name:"HealthStatus",data(){return{bars:[{id:1,x:"4.44"},{id:2,x:"12.11"},{id:3,x:"19.78"},{id:4,x:"27.44"},{id:5,x:"35.11"},{id:6,x:"42.77"},{id:7,x:"50.44"},{id:8,x:"58.11"},{id:9,x:"65.77"},{id:10,x:"73.44"}],currentHPBars:[]}},mounted(){this.currentHPBars=this.bars},methods:{updateHealth(t,e){var h=0;e.length>0&&e.forEach((t=>{h+=t.value}));var r=(parseInt(t)+parseInt(h))/t;if(r>0&&r<1){var i=Math.round(r*t),s=i-1;this.currentHPBars=this.bars.slice(0,s)}else 1==r?this.currentHPBars=this.bars:r<=0&&(this.currentHPBars=[])},getHealth(){return this.currentHPBars.length}}},a=s,n=h(1001),c=(0,n.Z)(a,r,i,!1,null,"f4ed2c24",null),o=c.exports},26400:function(t,e,h){"use strict";h.r(e);var r='<g id="attackFace"> <rect class="primary-color" x="2.91" y="2.93" width="77.18" height="59.09"/> <polygon points="80.56 30.99 80.56 21.94 79.18 21.94 79.18 19.81 79.18 15.98 77.03 15.98 77.03 19.81 77.03 33.23 79.18 33.23 79.18 30.99 80.56 30.99"/> <rect x="79.18" y="33.23" width="1.37" height="13.48"/> <polygon points="66.04 51.17 68.26 51.17 68.26 44.45 66.04 44.45 66.04 46.68 63.9 46.68 63.9 51.17 66.04 51.17"/> <rect x="29.13" y="37.74" width="2.24" height="6.71"/> <rect x="20.36" y="46.76" width="2.23" height="2.22"/> <polygon points="59.5 55.36 59.5 51.17 57.28 51.17 57.28 53.15 55.12 53.15 55.12 55.36 57.28 55.36 59.5 55.36"/> <rect x="68.26" y="55.36" width="2.17" height="2.23"/> <rect x="61.72" y="55.36" width="2.18" height="2.23"/> <rect x="66.04" y="57.59" width="2.23" height="2.28"/> <polygon points="50.73 55.38 48.53 55.38 48.53 57.62 50.73 57.62 50.73 59.87 61.72 59.87 61.72 57.59 50.73 57.59 50.73 55.38"/> <rect x="63.9" y="59.87" width="2.14" height="2.2"/> <rect x="44.37" y="2.93" width="15.13" height="2.15"/> <rect x="59.49" y="5.07" width="4.17" height="2.15"/> <rect x="63.66" y="7.22" width="2.5" height="2.19"/> <rect x="68.28" y="7.22" width="4.42" height="2.19"/> <polygon points="74.8 11.52 74.8 9.59 72.7 9.59 72.7 11.68 74.8 11.68 74.8 15.98 77.03 15.98 77.03 11.52 74.8 11.52"/> <path d="M77,46.72v2.22H74.82V46.72H72.61V44.45H70.55V40h2.06v4.48h2.21v2.27H77V40H74.82V37.74H77V33.23H74.82v2.26H72.61v2.25H70.55V35.49h2.06V31h2.15V19.81H72.7v-6H70.41V11.51H68.28V9.41H66.16V16H50.82V9.41H48.74V7.22H44.37V5.07H40V7.22h-4.3V9.41H33.66v2.27h2.07v2.15H38v4.31h2.13v4h2.23v6.63h2.23v6.75H42.31V31H40.08V26.54H37.93V22.11h-2.2v-4H33.66V15.81H31.45v-2H29V9.41h4.63V7.22H26.91v8.59H24.78v4H22.55v6.7H20.4V31h2.15v2.25H20.4V31H18.13v9h0v6.71H20.4V42.22h2.19v4.46h2.19V49H27V35.49H24.78V31H22.59V28.74h2.19v-2.2H29v2.2h2.38v4.5h2.15v2.25H31.36v2.25h2.12v6.74h-2.1v2.26h2.1v4.48H31.36v1.92H27V51.22H24.78V49H22.59v2.24H11.82v1.92H16v2.22h6.61v2.22h6.54v2.28H24.78V62h19.7V59.86h-4.4V57.58H37.91V53.14H35.72V37.74h2.19V40h0v6.77h2.15V40h2.23v6.77h2.17V49H42.31v2.24h6.24V44.45h4.38v2.23h4.35v2.24h4.44V46.68H63.9V44.45H66v-2.3h2.22v2.3h2.18V55.36h2.17V53.14H77v-2h2.15V46.72ZM24.78,40v2.18H22.59V40H20.4V35.49h2.19V40Zm15.3-2.23H37.93V35.49h2.15Zm6.57,6.71v2.29H44.54V42.15h2.11ZM68.26,31H52.89V19.81H66.07v2.3h2.19Zm6.56,20.18H72.61V49h2.21Z"/> </g> ';e["default"]=r},9962:function(t,e,h){"use strict";h.r(e);var r='<g id="attackFace"> <rect class="primary-color" x="2.91" y="2.93" width="77.18" height="59.09"/> <polygon points="80.56 30.99 80.56 21.94 79.18 21.94 79.18 19.81 79.18 15.98 77.03 15.98 77.03 19.81 77.03 33.23 79.18 33.23 79.18 30.99 80.56 30.99"/> <rect x="79.18" y="33.23" width="1.37" height="13.48"/> <polygon points="66.04 51.17 68.26 51.17 68.26 44.45 66.04 44.45 66.04 46.68 63.9 46.68 63.9 51.17 66.04 51.17"/> <rect x="29.13" y="37.74" width="2.24" height="6.71"/> <rect x="20.36" y="46.76" width="2.23" height="2.22"/> <polygon points="59.5 55.36 59.5 51.17 57.28 51.17 57.28 53.15 55.12 53.15 55.12 55.36 57.28 55.36 59.5 55.36"/> <rect x="68.26" y="55.36" width="2.17" height="2.23"/> <rect x="61.72" y="55.36" width="2.18" height="2.23"/> <rect x="66.04" y="57.59" width="2.23" height="2.28"/> <polygon points="50.73 55.38 48.53 55.38 48.53 57.62 50.73 57.62 50.73 59.87 61.72 59.87 61.72 57.59 50.73 57.59 50.73 55.38"/> <rect x="63.9" y="59.87" width="2.14" height="2.2"/> <rect x="44.37" y="2.93" width="15.13" height="2.15"/> <rect x="59.49" y="5.07" width="4.17" height="2.15"/> <rect x="63.66" y="7.22" width="2.5" height="2.19"/> <rect x="68.28" y="7.22" width="4.42" height="2.19"/> <polygon points="74.8 11.52 74.8 9.59 72.7 9.59 72.7 11.68 74.8 11.68 74.8 15.98 77.03 15.98 77.03 11.52 74.8 11.52"/> <path d="M77,46.72v2.22H74.82V46.72H72.61V44.45H70.55V40h2.06v4.48h2.21v2.27H77V40H74.82V37.74H77V33.23H74.82v2.26H72.61v2.25H70.55V35.49h2.06V31h2.15V19.81H72.7v-6H70.41V11.51H68.28V9.41H66.16V16H50.82V9.41H48.74V7.22H44.37V5.07H40V7.22h-4.3V9.41H33.66v2.27h2.07v2.15H38v4.31h2.13v4h2.23v6.63h2.23v6.75H42.31V31H40.08V26.54H37.93V22.11h-2.2v-4H33.66V15.81H31.45v-2H29V9.41h4.63V7.22H26.91v8.59H24.78v4H22.55v6.7H20.4V31h2.15v2.25H20.4V31H18.13v9h0v6.71H20.4V42.22h2.19v4.46h2.19V49H27V35.49H24.78V31H22.59V28.74h2.19v-2.2H29v2.2h2.38v4.5h2.15v2.25H31.36v2.25h2.12v6.74h-2.1v2.26h2.1v4.48H31.36v1.92H27V51.22H24.78V49H22.59v2.24H11.82v1.92H16v2.22h6.61v2.22h6.54v2.28H24.78V62h19.7V59.86h-4.4V57.58H37.91V53.14H35.72V37.74h2.19V40h0v6.77h2.15V40h2.23v6.77h2.17V49H42.31v2.24h6.24V44.45h4.38v2.23h4.35v2.24h4.44V46.68H63.9V44.45H66v-2.3h2.22v2.3h2.18V55.36h2.17V53.14H77v-2h2.15V46.72ZM24.78,40v2.18H22.59V40H20.4V35.49h2.19V40Zm15.3-2.23H37.93V35.49h2.15Zm6.57,6.71v2.29H44.54V42.15h2.11ZM68.26,31H52.89V19.81H66.07v2.3h2.19Zm6.56,20.18H72.61V49h2.21Z"/> </g> ';e["default"]=r},75934:function(t,e,h){"use strict";h.r(e);var r='<g id="attackFace"> <rect class="primary-color" x="2.91" y="2.93" width="77.18" height="59.09"/> <rect x="69.64" y="22.45" width="1.84" height="2.14"/> <polygon points="69.64 30.95 69.64 24.59 66.98 24.59 66.98 22.45 69.64 22.45 69.64 19.92 66.98 19.92 66.98 8.45 66.98 3 64.72 3 64.72 8.45 64.72 33.33 62.47 33.33 62.47 35.33 60.01 35.33 60.01 31.39 62.47 31.39 62.47 8.45 62.47 3 56.02 3 56.02 8.45 56.02 11.98 53.73 11.98 53.73 14.02 51.49 14.02 51.49 11.98 53.73 11.98 53.73 9.52 53.73 8.23 53.73 3 51.49 3 51.49 8.23 51.49 9.52 37.95 9.52 37.95 11.98 44.57 11.98 44.57 14.02 40.2 14.02 40.2 16.07 46.97 16.07 46.97 14.02 49.42 14.02 49.42 16.07 46.97 16.07 46.97 18.33 44.57 18.33 44.57 22.16 42.3 22.16 42.3 24.64 44.57 24.64 44.57 25.98 42.3 25.98 42.3 28.96 44.57 28.96 44.57 30.95 46.97 30.95 46.97 33.33 44.57 33.33 44.57 35.33 49.08 35.33 49.08 37.32 56.02 37.32 56.02 39.26 60.01 39.26 65.13 39.26 65.13 37.32 66.98 37.32 69.64 37.32 69.64 35.33 71.48 35.33 71.48 30.95 69.64 30.95"/> <rect x="37.95" y="16.07" width="2.25" height="2.14"/> <rect x="35.63" y="18.2" width="2.32" height="5.83"/> <rect x="37.95" y="24.03" width="2.25" height="4.92"/> <rect x="40.2" y="28.96" width="2.1" height="1.99"/> <rect x="42.3" y="30.95" width="2.27" height="2.38"/> <polygon points="73.67 30.95 73.67 35.7 75.92 35.7 75.92 28.96 73.67 28.96 73.67 24.59 71.48 24.59 71.48 30.95 73.67 30.95"/> <polygon points="75.92 35.7 75.92 41.74 73.67 41.74 73.67 43.86 71.48 43.86 71.48 45.67 66.98 45.67 66.98 47.81 69.16 47.81 69.16 54 71.48 54 71.48 51.77 73.67 51.77 73.67 48.01 75.92 48.01 75.92 51.77 73.67 51.77 73.67 54 71.48 54 71.48 56.43 69.16 56.43 69.16 58.63 66.7 58.63 66.7 60.55 64.72 60.55 64.72 64.66 62.47 64.66 62.47 67.19 64.64 67.19 64.64 69.52 66.7 69.52 66.7 67.19 64.83 67.19 64.83 64.66 66.7 64.66 66.7 67.19 69.16 67.19 69.16 64.66 71.48 64.66 71.48 62.72 73.67 62.72 73.67 58.63 75.92 58.63 75.92 54 77.84 54 77.84 35.7 75.92 35.7"/> <rect x="66.7" y="54" width="2.46" height="2.43"/> <polygon points="65.13 56.43 65.13 50.08 66.98 50.08 66.98 47.81 62.47 47.81 62.47 50.08 60.01 50.08 60.01 52.25 57.55 52.25 57.55 49.95 56.02 49.95 56.02 47.81 53.76 47.81 53.76 45.48 49.29 45.48 49.29 43.54 44.57 43.54 44.57 45.48 49.25 45.48 49.25 49.95 51.51 49.95 51.51 56.06 49.29 56.06 49.29 54 46.97 54 46.97 52.09 46.97 49.95 44.57 49.95 44.57 45.48 42.3 45.48 42.3 52.09 40.2 52.09 40.2 54 44.3 54 44.3 56.11 49.08 56.11 49.08 58.36 51.51 58.36 57.55 58.36 57.55 56.43 60.01 56.43 62.57 56.43 62.57 58.63 66.7 58.63 66.7 56.43 65.13 56.43"/> <rect x="60.01" y="58.63" width="2.56" height="1.91"/> <rect x="53.39" y="62.8" width="6.63" height="2.18"/> <rect x="50.82" y="60.37" width="2.56" height="2.43"/> <polygon points="57.55 69.26 56.02 69.26 56.02 71.27 57.55 71.27 57.55 72.56 62.57 72.56 62.57 71.27 60.01 71.27 60.01 69.26 62.47 69.26 62.47 67.19 57.55 67.19 57.55 69.26"/> <rect x="33.37" y="11.98" width="4.58" height="1.88"/> <rect x="24.51" y="41.24" width="2.14" height="3.92"/> <path d="M40.2,54H37.68V52.09H40.2V47.81H37.68v2.27h-2V48.14H33.37V43.86H31.1V37.29h2.27v4h2.26v6.57h2V41.24H40.2v-2H37.68V36.93h-2V34.85H33.37V31H31.1V26.5H28.83V18.2h2.75V16.07h1.79V13.86H28.83v2.21H26.46V18.2H24.51v2.06h-2.3v4.38h-2v5.81H17.87V45.16h2.32v6.93h2.46v4H20.49v1.86h2.16V56.11h1.86v4.43H22.1v1.72H19.92V64.4H17.87v2.14H15.48v2.1H13.43v3.28h2.05V70.75h2.39V68.68h2.05V66.54H22.1V64.4h7V62.26H26.65v-3.9h2.18v2.18H31.1v2.18h2.27V64.4h2.26v.26h2V64.4h.41v2.14H33.37V64.4H29.14v2.33h4.23v1h4.72v.9h1.84v3.88H44.3v-2.3h2.49V68.68H44.3v-2h2.49v2h2.29v-.46h4.68V66.54H49.08V64.66H46.79V62.6H44.3V56.11H40.2Zm-20-16.68v0h8.64v0H24.51v1.94h2.16v2h2.08v-2h.08v5.9H26.65v3H24.51v-3H22.65V37.32Z"/> <polygon points="42.3 41.24 40.2 41.24 40.2 45.48 42.3 45.48 42.3 43.54 44.57 43.54 44.57 41.24 42.3 41.24"/> <rect x="13.43" y="62.47" width="2.48" height="2.36"/> <rect x="15.91" y="59.86" width="2.53" height="2.4"/> <rect x="18.44" y="57.92" width="2.05" height="1.94"/> <polygon points="17.87 70.75 17.87 72.26 28.51 72.26 28.51 70.75 23.31 70.75 23.31 68.68 19.92 68.68 19.92 70.75 17.87 70.75"/> </g> ';e["default"]=r},39810:function(t,e,h){var r={"./bass/attack-face.svg":26400,"./megaman/attack-face.svg":9962,"./protoman/attack-face.svg":75934};function i(t){var e=s(t);return h(e)}function s(t){if(!h.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=s,t.exports=i,i.id=39810}}]);
//# sourceMappingURL=1417.43c73a18.js.map