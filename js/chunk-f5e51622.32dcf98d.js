(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f5e51622"],{"544e":function(t,e,r){},6084:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("g",{staticClass:"hp-bar"},[r("rect",{attrs:{x:"2.91",y:"62.02",width:"77.18",height:"9.98"}}),r("rect",{staticClass:"primary-color",attrs:{x:"3",y:"64.55",width:"77.18",height:"7.45"}}),t._l(t.currentHPBars,(function(t){return r("rect",{key:t.id,attrs:{x:t.x,y:"64.79",width:"4.85",height:"6.88"}})}))],2)},i=[],n=(r("4160"),r("fb6a"),r("159b"),{name:"HealthStatus",data:function(){return{bars:[{id:1,x:"4.44"},{id:2,x:"12.11"},{id:3,x:"19.78"},{id:4,x:"27.44"},{id:5,x:"35.11"},{id:6,x:"42.77"},{id:7,x:"50.44"},{id:8,x:"58.11"},{id:9,x:"65.77"},{id:10,x:"73.44"}],currentHPBars:[]}},mounted:function(){this.currentHPBars=this.bars},methods:{updateHealth:function(t,e){var r=0;e.length>0&&e.forEach((function(t){r+=t.value}));var s=(parseInt(t)+parseInt(r))/t;if(s>0&&s<1){var i=Math.round(s*t),n=i-1;this.currentHPBars=this.bars.slice(0,n)}else 1==s?this.currentHPBars=this.bars:s<=0&&(this.currentHPBars=[])},getHealth:function(){return this.currentHPBars.length}}}),a=n,h=r("2877"),c=Object(h["a"])(a,s,i,!1,null,"f4ed2c24",null);e["a"]=c.exports},"613e":function(t,e,r){"use strict";var s=r("544e"),i=r.n(s);i.a},becb:function(t,e){var r='<g id="rightFace"> <rect class="primary-color" x="2.91" y="2.93" width="77.18" height="59.09"/> <polygon points="80.56 30.99 80.56 21.94 79.18 21.94 79.18 19.81 79.18 15.98 77.03 15.98 77.03 19.81 77.03 33.23 79.18 33.23 79.18 30.99 80.56 30.99"/> <rect x="79.18" y="33.23" width="1.37" height="13.48"/> <polygon points="66.04 51.17 68.26 51.17 68.26 44.45 66.04 44.45 66.04 46.68 63.9 46.68 63.9 51.17 66.04 51.17"/> <rect x="29.13" y="37.74" width="2.24" height="6.71"/> <rect x="20.36" y="46.76" width="2.23" height="2.22"/> <polygon points="59.5 55.36 59.5 51.17 57.28 51.17 57.28 53.15 55.12 53.15 55.12 55.36 57.28 55.36 59.5 55.36"/> <rect x="68.26" y="55.36" width="2.17" height="2.23"/> <rect x="61.72" y="55.36" width="2.18" height="2.23"/> <rect x="66.04" y="57.59" width="2.23" height="2.28"/> <polygon points="50.73 55.38 48.53 55.38 48.53 57.62 50.73 57.62 50.73 59.87 61.72 59.87 61.72 57.59 50.73 57.59 50.73 55.38"/> <rect x="63.9" y="59.87" width="2.14" height="2.2"/> <rect x="44.37" y="2.93" width="15.13" height="2.15"/> <rect x="59.49" y="5.07" width="4.17" height="2.15"/> <rect x="63.66" y="7.22" width="2.5" height="2.19"/> <rect x="68.28" y="7.22" width="4.42" height="2.19"/> <polygon points="74.8 11.52 74.8 9.59 72.7 9.59 72.7 11.68 74.8 11.68 74.8 15.98 77.03 15.98 77.03 11.52 74.8 11.52"/> <path d="M77,46.72v2.22H74.82V46.72H72.61V44.45H70.55V40h2.06v4.48h2.21v2.27H77V40H74.82V37.74H77V33.23H74.82v2.26H72.61v2.25H70.55V35.49h2.06V31h2.15V19.81H72.7v-6H70.41V11.51H68.28V9.41H66.16V16H50.82V9.41H48.74V7.22H44.37V5.07H40V7.22h-4.3V9.41H33.66v2.27h2.07v2.15H38v4.31h2.13v4h2.23v6.63h2.23v6.75H42.31V31H40.08V26.54H37.93V22.11h-2.2v-4H33.66V15.81H31.45v-2H29V9.41h4.63V7.22H26.91v8.59H24.78v4H22.55v6.7H20.4V31h2.15v2.25H20.4V31H18.13v9h0v6.71H20.4V42.22h2.19v4.46h2.19V49H27V35.49H24.78V31H22.59V28.74h2.19v-2.2H29v2.2h2.38v4.5h2.15v2.25H31.36v2.25h2.12v6.74h-2.1v2.26h2.1v4.48H31.36v1.92H27V51.22H24.78V49H22.59v2.24H11.82v1.92H16v2.22h6.61v2.22h6.54v2.28H24.78V62h19.7V59.86h-4.4V57.58H37.91V53.14H35.72V37.74h2.19V40h0v6.77h2.15V40h2.23v6.77h2.17V49H42.31v2.24h6.24V44.45h4.38v2.23h4.35v2.24h4.44V46.68H63.9V44.45H66v-2.3h2.22v2.3h2.18V55.36h2.17V53.14H77v-2h2.15V46.72ZM24.78,40v2.18H22.59V40H20.4V35.49h2.19V40Zm15.3-2.23H37.93V35.49h2.15Zm6.57,6.71v2.29H44.54V42.15h2.11ZM68.26,31H52.89V19.81H66.07v2.3h2.19Zm6.56,20.18H72.61V49h2.21Z"/> </g> ';t.exports=r},d91e:function(t,e,r){var s={"./megaman/right-face.svg":"becb"};function i(t){var e=n(t);return r(e)}function n(t){if(!r.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=n,t.exports=i,i.id="d91e"},f544:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("g",[r("svg",{attrs:{viewBox:"0 0 83 75",width:"83",height:"75",x:"48.05",y:"64.94"}},[r("rect",{attrs:{width:"83",height:"75",rx:"3.01",ry:"3.01"}}),"ai"===this.battleType&&null!==this.currentCharacter&&"player"!==this.currentCharacter.type?r("g",{domProps:{innerHTML:t._s(this.screenContent)}}):t._e(),"ai"===this.battleType&&null!==this.currentCharacter&&"player"===this.currentCharacter.type?r("g",{staticClass:"flip",domProps:{innerHTML:t._s(this.screenContent)}}):t._e(),"ai"!==this.battleType&&null!==this.currentCharacter?r("g",{staticClass:"standby-face-right",class:{flip:t.currentCharacter.sessionId!==this.sessionId},domProps:{innerHTML:t._s(this.screenContent)}}):t._e(),r("health-status",{ref:"hpBar"})],1)])},i=[],n=(r("4160"),r("159b"),r("5530")),a=r("9e85"),h=r("2f62"),c=r("6084"),o={name:"BattleChooseWinner",components:{HealthStatus:c["a"]},data:function(){return{currentCharacter:null,screenContent:""}},computed:Object(n["a"])({},Object(h["c"])({turnType:function(t){return t.battle.turnType},battleType:function(t){return t.battle.type},enemy:function(t){return t.battle.enemy},player:function(t){return t.battle.player},currentTurn:function(t){return t.battle.currentTurn},deviceType:function(t){return t.session.deviceType},sessionId:function(t){return t.session.id}}),{},Object(h["b"])({enemyDamageActions:"battle/getAllEnemyDamageActions",playerHPActions:"battle/getAllPlayerHPActions"})),mounted:function(){this.battleType===a["b"].AI?(this.turnType===a["k"].Attack?(this.currentCharacter=this.player,this.createUI()):(this.currentCharacter=this.enemy,this.createUI()),this.startAnim(this.player,this.enemy)):(this.currentCharacter=this.player,this.createUI(),this.$socket.client.emit("getPlayersStatus",this.$store.state.battle.id))},methods:{createHPBars:function(t){this.$refs.hpBar&&this.$refs.hpBar.updateHealth(t.hp,this.getDamage(t))},startAnim:function(t,e){var r=this,s=750,i=4e3,n=null;n=setInterval((function(){i<=0?(clearInterval(n),r.chooseWinner(t,e)):i>0&&(r.battleType===a["b"].AI?r.currentCharacter.type===t.type?r.currentCharacter=e:r.currentCharacter=t:r.currentCharacter.sessionId===t.sessionId?r.currentCharacter=e:r.currentCharacter=t,r.createUI(),i-=s)}),s)},chooseWinner:function(t,e){this.calculateTotalHP(t)>this.calculateTotalHP(e)?this.currentCharacter=t:this.currentCharacter=e;var r="";this.createUI(),this.battleType===a["b"].AI?this.currentCharacter.type===a["g"].Player?(r=a["j"].BattleWinner,this.$store.commit("session/levelup"),this.enemy.type===a["g"].Virus?this.$store.dispatch("session/stageClear"):this.enemy.type===a["g"].Boss&&this.$store.dispatch("session/stageComplete")):(r=a["j"].BattleLoser,this.currentCharacter.type===a["g"].Boss?this.$store.commit("session/decrementStageClear",10):this.$store.commit("session/decrementNaviRecovery",100)):(this.currentCharacter.sessionId===this.$store.state.session.id?(this.$store.commit("session/incrementWins"),r=a["j"].BattleWinner):(this.$store.commit("session/incrementLosses"),r=a["j"].BattleLoser),this.$socket.client.emit("endBattle",this.$store.state.battle.id)),this.$store.commit("session/setCurrentScene",r)},importRightFace:function(){this.screenContent=r("d91e")("./".concat(this.deviceType.toLowerCase(),"/right-face.svg"))},importVirus:function(){this.screenContent=r("e70d")("./".concat(this.enemy.image))},importBoss:function(){this.screenContent=r("233c")("./".concat(this.enemy.image))},createUI:function(){this.currentCharacter.type===a["g"].Player?this.importRightFace():this.currentCharacter.type===a["g"].Virus?this.importVirus():this.importBoss(),this.createHPBars(this.currentCharacter)},calculateTotalHP:function(t){var e=0,r=this.getDamage(t);return r.forEach((function(t){e+=t.value})),t.hp+e},getDamage:function(t){var e=[];return e=t.type===a["g"].Player&&t.sessionId===this.sessionId?this.playerHPActions:this.enemyDamageActions,e}},sockets:{playersStatus:function(){this.startAnim(this.player,this.enemy)}}},u=o,l=(r("613e"),r("2877")),p=Object(l["a"])(u,s,i,!1,null,"e41bc24e",null);e["default"]=p.exports},fb6a:function(t,e,r){"use strict";var s=r("23e7"),i=r("861d"),n=r("e8b5"),a=r("23cb"),h=r("50c4"),c=r("fc6a"),o=r("8418"),u=r("b622"),l=r("1dde"),p=r("ae40"),y=l("slice"),d=p("slice",{ACCESSORS:!0,0:0,1:2}),v=u("species"),H=[].slice,m=Math.max;s({target:"Array",proto:!0,forced:!y||!d},{slice:function(t,e){var r,s,u,l=c(this),p=h(l.length),y=a(t,p),d=a(void 0===e?p:e,p);if(n(l)&&(r=l.constructor,"function"!=typeof r||r!==Array&&!n(r.prototype)?i(r)&&(r=r[v],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return H.call(l,y,d);for(s=new(void 0===r?Array:r)(m(d-y,0)),u=0;y<d;y++,u++)y in l&&o(s,u,l[y]);return s.length=u,s}})}}]);
//# sourceMappingURL=chunk-f5e51622.32dcf98d.js.map