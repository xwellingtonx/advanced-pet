(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71c42ff4"],{6084:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("g",{staticClass:"hp-bar"},[s("rect",{attrs:{x:"2.91",y:"62.02",width:"77.18",height:"9.98"}}),s("rect",{staticClass:"primary-color",attrs:{x:"3",y:"64.55",width:"77.18",height:"7.45"}}),t._l(t.currentHPBars,(function(t){return s("rect",{key:t.id,attrs:{x:t.x,y:"64.79",width:"4.85",height:"6.88"}})}))],2)},i=[],r=(s("4160"),s("fb6a"),s("159b"),{name:"HealthStatus",data:function(){return{bars:[{id:1,x:"4.44"},{id:2,x:"12.11"},{id:3,x:"19.78"},{id:4,x:"27.44"},{id:5,x:"35.11"},{id:6,x:"42.77"},{id:7,x:"50.44"},{id:8,x:"58.11"},{id:9,x:"65.77"},{id:10,x:"73.44"}],currentHPBars:[]}},mounted:function(){this.currentHPBars=this.bars},methods:{updateHealth:function(t,e){var s=0;e.length>0&&e.forEach((function(t){s+=t.value}));var n=(parseInt(t)+parseInt(s))/t;if(n>0&&n<1){var i=Math.round(n*t),r=i-1;this.currentHPBars=this.bars.slice(0,r)}else 1==n?this.currentHPBars=this.bars:n<=0&&(this.currentHPBars=[])},getHealth:function(){return this.currentHPBars.length}}}),a=r,o=s("2877"),c=Object(o["a"])(a,n,i,!1,null,"f4ed2c24",null);e["a"]=c.exports},"945b":function(t,e,s){var n={"./bass/damage-face.svg":"54e3","./megaman/damage-face.svg":"63f4","./protoman/damage-face.svg":"ce97"};function i(t){var e=r(t);return s(e)}function r(t){if(!s.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}i.keys=function(){return Object.keys(n)},i.resolve=r,t.exports=i,i.id="945b"},b917:function(t,e,s){},e00d:function(t,e,s){"use strict";var n=s("b917"),i=s.n(n);i.a},f757:function(t,e,s){var n={"./bass/attack-face.svg":"30b9","./megaman/attack-face.svg":"2286","./protoman/attack-face.svg":"6384"};function i(t){var e=r(t);return s(e)}function r(t){if(!s.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}i.keys=function(){return Object.keys(n)},i.resolve=r,t.exports=i,i.id="f757"},fb54:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("g",[s("svg",{attrs:{viewBox:"0 0 83 75",width:"83",height:"75",x:"48.05",y:"64.94"}},[s("rect",{attrs:{width:"83",height:"75",rx:"3.01",ry:"3.01"}}),"ai"===this.battleType&&"attack"===this.turnType?s("g",{domProps:{innerHTML:t._s(this.screenContent)}}):t._e(),"ai"===this.battleType&&"defense"===this.turnType||"player"===this.battleType?s("g",[t.isAttackHit?s("g",{class:{inverted:this.toggleColor},domProps:{innerHTML:t._s(this.screenContent)}}):t._e(),t.isAttackHit?t._e():s("g",{staticClass:"standby-face-right",class:{flip:"defense"===t.turnType},domProps:{innerHTML:t._s(this.screenContent)}})]):t._e(),s("health-status",{ref:"hpBar"})],1)])},i=[],r=(s("b0c0"),s("5530")),a=s("9e85"),o=s("2f62"),c=s("6084"),h={name:"BattleAttackDamage",components:{HealthStatus:c["a"]},data:function(){return{toggleColor:!1,defPlayer:null,screenContent:""}},computed:Object(r["a"])({},Object(o["c"])({turnType:function(t){return t.battle.turnType},isAttackHit:function(t){return t.battle.isAttackHit},battleType:function(t){return t.battle.type},deviceType:function(t){return t.session.deviceType},enemy:function(t){return t.battle.enemy},player:function(t){return t.battle.player},currentTurn:function(t){return t.battle.currentTurn}}),{},Object(o["b"])({enemyDamageActions:"battle/getAllEnemyDamageActions",playerHPActions:"battle/getAllPlayerHPActions"})),mounted:function(){var t=this;this.turnType===a["k"].Attack?this.enemy.type===a["g"].Virus?(this.importVirus(),this.showHPStatus(this.enemy.hp,this.enemyDamageActions)):this.enemy.type===a["g"].Boss?(this.importBoss(),this.showHPStatus(this.enemy.hp,this.enemyDamageActions)):(this.showPlayerScreens(this.enemy.name),this.showHPStatus(this.enemy.hp,this.enemyDamageActions)):(this.showPlayerScreens(this.deviceType),this.showHPStatus(this.player.hp,this.playerHPActions)),setTimeout((function(){t.changeTurnRequest()}),2e3)},sockets:{playersStatus:function(t,e){this.defPlayer=e,e.id===this.$store.state.session.id?this.showHPStatus(this.player.hp,this.playerHPActions):this.showHPStatus(this.enemy.hp,this.enemyDamageActions)},changeTurn:function(t){var e="";t===a["k"].Attack?(this.$store.commit("battle/setTurnType",a["k"].Attack),e=a["j"].SlotIn):(this.$store.commit("battle/setTurnType",a["k"].Defense),e=a["j"].LoadingNow),this.$store.commit("session/setCurrentScene",e)}},methods:{changeTurnRequest:function(){if(0===this.$refs.hpBar.getHealth()){var t="";this.battleType===a["b"].AI?this.turnType===a["k"].Attack?(t=a["j"].BattleWinner,this.$store.commit("session/levelup"),this.enemy.type===a["g"].Virus?this.$store.dispatch("session/stageClear"):this.enemy.type===a["g"].Boss&&this.$store.dispatch("session/stageComplete")):(t=a["j"].BattleLoser,this.enemy.type===a["g"].Boss?this.$store.commit("session/decrementStageClear",10):this.$store.commit("session/decrementNaviRecovery",100)):(this.defPlayer.id===this.$store.state.session.id?(this.$store.commit("session/incrementLosses"),t=a["j"].BattleLoser):(this.$store.commit("session/incrementWins"),t=a["j"].BattleWinner),this.$socket.client.emit("endBattle",this.$store.state.battle.id)),this.$store.commit("session/setCurrentScene",t)}else 5==this.currentTurn?this.$store.commit("session/setCurrentScene",a["j"].BattleChooseWinner):(this.$store.commit("battle/setCurrentTurn",this.currentTurn+1),this.battleType===a["b"].AI?this.turnType===a["k"].Attack?(this.$store.commit("battle/setTurnType",a["k"].Defense),this.$store.commit("session/setCurrentScene",a["j"].EnemyAttack)):(this.$store.commit("battle/clearChips"),this.$store.commit("battle/setTurnType",a["k"].Attack),this.$store.commit("session/setCurrentScene",a["j"].SlotIn)):(this.$store.commit("battle/clearChips"),this.$socket.client.emit("changeTurnRequest",this.$store.state.battle.id)))},importDamageFace:function(t){this.screenContent=s("945b")("./".concat(t.toLowerCase(),"/damage-face.svg"))},importRightFace:function(t){this.screenContent=s("f757")("./".concat(t.toLowerCase(),"/attack-face.svg"))},importVirus:function(){this.screenContent=s("e70d")("./".concat(this.enemy.image))},importBoss:function(){this.screenContent=s("233c")("./".concat(this.enemy.image))},showPlayerScreens:function(t){var e=this;this.$socket.client.emit("getPlayersStatus",this.$store.state.battle.id),this.isAttackHit?(this.importDamageFace(t),setInterval((function(){e.toggleColor=!e.toggleColor}),200)):this.importRightFace(t)},showHPStatus:function(t,e){this.$refs.hpBar.updateHealth(t,e)}}},u=h,l=(s("e00d"),s("2877")),m=Object(l["a"])(u,n,i,!1,null,"6f6c2ee7",null);e["default"]=m.exports},fb6a:function(t,e,s){"use strict";var n=s("23e7"),i=s("861d"),r=s("e8b5"),a=s("23cb"),o=s("50c4"),c=s("fc6a"),h=s("8418"),u=s("b622"),l=s("1dde"),m=l("slice"),f=u("species"),p=[].slice,y=Math.max;n({target:"Array",proto:!0,forced:!m},{slice:function(t,e){var s,n,u,l=c(this),m=o(l.length),d=a(t,m),g=a(void 0===e?m:e,m);if(r(l)&&(s=l.constructor,"function"!=typeof s||s!==Array&&!r(s.prototype)?i(s)&&(s=s[f],null===s&&(s=void 0)):s=void 0,s===Array||void 0===s))return p.call(l,d,g);for(n=new(void 0===s?Array:s)(y(g-d,0)),u=0;d<g;d++,u++)d in l&&h(n,u,l[d]);return n.length=u,n}})}}]);
//# sourceMappingURL=chunk-71c42ff4.b2574cac.js.map